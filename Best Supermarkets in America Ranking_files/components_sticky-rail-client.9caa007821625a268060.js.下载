(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{388:function(t,e,r){"use strict";r.r(e);var n=r(793),i=r.n(n),a=r(804),c=r.n(a),o=r(1),s=r.n(o),u=r(2),l=r.n(u),d=r(5);function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e,r,n,i,a,c){try{var o=t[a](c),s=o.value}catch(t){return void r(t)}o.done?e(s):Promise.resolve(s).then(n,i)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function c(t){p(a,n,i,c,o,"next",t)}function o(t){p(a,n,i,c,o,"throw",t)}c(void 0)}))}}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=r(19).observeForIntersection,b=function(t){var e=s()(t,'image_list["image/jpeg"].images',[]);if(!Array.isArray(e))return"";var r=e.filter((function(t){return t.width>320&&t.width<960})).pop();return r?r.url:""},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return'\n  <h3 class="rr-heading headline-bold">'.concat(t.dataset.title,'</h3>\n  <a href="').concat(e.url).concat(t.dataset.tracking?"?".concat(t.dataset.tracking):"",'" class="" data-popular-link>\n    <div class="">\n      <figure class="figure image-figure-image" data-type="img" data-e2e-name="image-figure-image" data-media-container="image" style="">\n        <img src="').concat(b(e),'" data-alt="').concat(e.title,'" data-title="').concat(e.title,'" data-class="popular-post-image">\n      </figure>\n    </div>\n    <h4 class="popular-post-title headline-bold">').concat(e.title,"</h4>\n  </a>\n")},k="sticky-rail-ad-container",A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rail=e,this.recirc=e.querySelector(".popular-recirc"),this.header=document.querySelector("header"),this.content=document.getElementById("l-content"),this.stickyAd=this.rail.querySelector(".".concat(k,":last-child")),this.stickyAd||(this.stickyAd=this.rail.querySelector(".".concat(k))),this.stickyAd&&(this.ad=this.stickyAd.querySelector("[data-bi-ad]"),this.observe(),this.build(),this.bind())}var e,r,n,a;return e=t,(r=[{key:"build",value:function(){var t=this,e=this.content.offsetHeight,r=this.stickyAd.offsetHeight,n=document.querySelector(".post-content-bottom"),a=c()(e/r)||2;!n&&a>4&&(a=4);var o=this.ad.getAttribute("id"),s=this.ad.getAttribute("data-tile-order");s=s?parseInt(s.replace("tile-",""),10):1;var u=this.stickyAd;i()(a).forEach((function(e){s+=1;var r=document.createElement("div");r.classList.add(k),r.classList.add("container-".concat(e+2));var n=t.ad.cloneNode();n.setAttribute("id","".concat(o,"_dynamic_").concat(e)),n.setAttribute("data-tile-order","tile-".concat(s)),n.setAttribute("data-buffer",3),r.appendChild(n),u.parentNode.insertBefore(r,u.nextSibling),u=r})),this.stickyItems=document.querySelectorAll(".".concat(k))}},{key:"bind",value:function(){l.a.subscribe(d.SCROLL,this.sticky.bind(this))}},{key:"observe",value:function(){var t={target:this.recirc,cb:this.hydrate.bind(this)};v(t)}},{key:"hydrate",value:(a=y(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this,fetch("/ajax/popular-posts?section=".concat(this.recirc.dataset.section||"")).then(function(){var t=y(regeneratorRuntime.mark((function t(r){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:if(n=t.sent,i=s()(n,"data.items[0]")){t.next=6;break}return t.abrupt("return");case 6:a=g(e.recirc,i),e.recirc.innerHTML=a;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log("RR - HYDRATE ERROR",t)}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"sticky",value:function(){var t=document.querySelector(".subnav-ad-leave-behind.has-ad"),e=t?t.offsetHeight:12,r=this.header.offsetHeight+e;this.rail.style.setProperty("--sticky-top","".concat(r,"px"))}}])&&m(e.prototype,r),n&&m(e,n),t}();e.default=function(t){f(t).forEach((function(t){return new A(t)}))}}}]);